% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions.R
\name{pcoqs}
\alias{pcoqs}
\title{Differentially Private Conformal Prediction}
\usage{
pcoqs(
  model,
  X_cal,
  Y_cal,
  X_test,
  alpha = 0.1,
  rho = 1,
  predict_fun = function(model, X, ...) predict(model, newdata = data.frame(X), ...),
  score_fun = function(y, y_hat) abs(y - y_hat),
  output_fun = function(y_hat, q_hat) {
     list(prediction = y_hat, lower = y_hat -
    q_hat, upper = y_hat + q_hat)
 },
  lower_bound = 0,
  upper_bound = 1,
  delta = 1e-10,
  predict_args = list()
)
}
\arguments{
\item{model}{A fitted model object.}

\item{X_cal}{Calibration feature matrix.}

\item{Y_cal}{Calibration responses.}

\item{X_test}{Test feature matrix.}

\item{alpha}{Miscoverage rate.}

\item{rho}{Privacy parameter.}

\item{predict_fun}{A prediction function with arguments (model, X, ...).}

\item{score_fun}{Function to compute nonconformity scores: score_fun(y, y_hat).}

\item{output_fun}{Function to produce final output from predictions and quantile.}

\item{lower_bound}{Lower bound for quantile search.}

\item{upper_bound}{Upper bound for quantile search.}

\item{delta}{Convergence threshold.}

\item{predict_args}{List of additional arguments for prediction.}
}
\value{
A list with prediction output and the DP quantile.
}
\description{
Constructs conformal prediction outputs (intervals or sets) with differentially private quantile estimation.
}
\examples{
set.seed(123)
X <- matrix(rnorm(100 * 3), ncol = 3)
Y <- X \%*\% c(1, -2, 1) + rnorm(100)
model <- lm(Y ~ ., data = data.frame(Y, X))
result <- pcoqs(model, X, Y, X,
                alpha = 0.1, rho = 1.0)
head(result$output)
}
